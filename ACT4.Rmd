---
title: "Tarea4"
author: "Sofía Palacios Cuevas"
date: "20/9/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

<div align="justify"><p>**Instrucciones:** En esta actividad deberás realizar, mediante gráficos sencillos, una visualización preliminar de cada una de tus variables de interés.</p> <p> Sube, tanto tu script en formato *Rmd como la impresión en PDF o HTML del mismo, en el espacio correspondiente del Moodle.</p></div>

Rúbrica:

* En el script se trabaja con la base de datos previamente curada.
* En el script se realiza un gráfico de todas y cada una de las variables de interés.
* Todas las líneas de código están comentadas.
* Se realiza una breve descripción de lo que se muestra en cada gráfico.
* El script se imprime en PDF, Word o HTML.


# Ejemplos en clase{.tabset}
## **UP**

## **E1**
### **Ejemplo 1** Gráfica de barras de una variable 
Trabajaremos con la base de datos del equipo 1, referente a datos mundiales de suicidio
<https://www.kaggle.com/szamil/who-suicide-statistics>

```{r}
# We read Team 1's database
bd.suicide<-read.csv("who_suicide_statistics.csv")

# Lets check the names of our variables
names(bd.suicide)

# Now, lets check the structure of the database
str(bd.suicide)
```

Next, we are going to build a bar graph of the number of male and female cases:

```{r}
# So, lets call ggplot2
library(ggplot2)
# Now, lets make our graph!
ggplot(bd.suicide, aes(x=as.factor(sex), fill=as.factor(sex))) + 
  geom_bar() + 
  scale_fill_grey(start=0.5, end = 0.75)

```

A usefull way to ask R how many women/man cases we have, is to do the following:

```{r}
table(bd.suicide$sex)
```
## **E2**
### **Example 2** Density graph of a continuos variable.
<div aling="justify"><p> In this case, we will use Team 5's database, which corresponds to student performance <https://www.kaggle.com/spscientist/students-performance-in-exams></p></div>

```{r}
# So, lets read or database
db.student.perfo <-read.csv("StudentsPerformance.csv")

# Lets check our variables
names(db.student.perfo)

# Now, lets reviw its structure
str(db.student.perfo)

# We finnaly change our variable to a factor one
db.student.perfo$lunch<-as.factor(db.student.perfo$lunch)
```
We note that the variables 'math.score', 'reading.score' and 'writing.score' are continuous;therefore, it's a good idea to see their density
```{r}
# Lets call our libraries
library(ggplot2)
library(hrbrthemes)
library(dplyr)
library(tidyr)
library(viridis)

# Lets plot it!
ggplot(db.student.perfo, aes(x=math.score, group=lunch, fill=lunch))+
  geom_density(adjust=1.5, alpha=0.5)+
  theme_classic()
```

## **E3** 
### **Example 3** Panel Bar Graph
Lets continue using Team's 5 database
```{r}
# We call our libraries
library(ggplot2)
library(viridisLite)
library(hrbrthemes)

# Now we plot
ggplot(db.student.perfo, aes(x=lunch, y = reading.score, fill = lunch ) )+
  geom_bar(postition = "dodge", stat = "identity") +
  scale_fill_viridis(discrete = T, option = "E") +
  facet_wrap(~race.ethnicity) +
  theme_ipsum() +
  ggtitle("Puntaje en matemáticas, por etnia y tipo de almuerzo" ) +
  theme(plot.title = element_text(size=16))
  
```

## **E4**
### **Example 4** Time Series Plot
We will continue working with the suicide database.
```{r}
# New chunk Ctrl+Alt+i
# st = serie de tiempo (time series)
# We make a subset with the data from Mexico
st.suicide.mex <- subset(bd.suicide, country=="Mexico")
# We call or libraries
library(ggplot2)
library(dplyr)

# We plot
ggplot(st.suicide.mex, aes(x=year, y=suicides_no)) +
  geom_line()
# UPS, THIS GRAPH IS A BAD EXAMPLE XD
```
Lets see a more detailed plot
```{r}
# We select mexican men, 15-24 age range:
st.young.men <- subset(bd.suicide , country =="Mexico"&age=="15-24 years"&sex=="male" , selec = c(year, suicides_no) )
# We call our libraries
library(ggplot2)
library(dplyr)
library(plotly)
library(hrbrthemes)

# We plot and save it in an object
plot <- st.young.men %>%
  ggplot( aes(x=year, y=suicides_no) ) +
  geom_line()

# We convert the graphic object to a ploty format
p <- ggplotly(plot)
p
```


# Visualización por base de datos{.tabset}
## Modulo
## Vivienda
